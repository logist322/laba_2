{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api/index.js","webpack:///./src/components/abstract-component.js","webpack:///./src/components/abstract-smart-component.js","webpack:///./src/components/favorite-weather-container.js","webpack:///./src/components/favorite-weather-general.js","webpack:///./src/components/favorites-board.js","webpack:///./src/components/favorites-header.js","webpack:///./src/components/local-header.js","webpack:///./src/components/local-weather-container.js","webpack:///./src/components/local-weather-general.js","webpack:///./src/components/weather-details.js","webpack:///./src/controllers/favorite-weather.js","webpack:///./src/controllers/favorites-board.js","webpack:///./src/controllers/local-weather.js","webpack:///./src/main.js","webpack:///./src/models/cities.js","webpack:///./src/models/city.js","webpack:///./src/utils/common.js","webpack:///./src/utils/render.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP,KAAK,E;AACL;;AAEA;AACA;;AAEA,oBAAoB,SAAS,cAAc,mBAAmB,OAAO,oBAAoB,sBAAsB,OAAO;AACtH;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB,SAAS,WAAW,IAAI,sBAAsB,OAAO;AACzE;AACA;AACA,OAAO;AACP;;AAEA;AACA,qB;;AAEA,oBAAoB,SAAS,YAAY,gBAAgB,sBAAsB,OAAO;AACtF;AACA;AACA;;AAEA;AACA;;AAEA,mDAAmD,SAAS;AAC5D,OAAO;AACP;AACA;AACA,S;;AAEA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;AC/GA;AAAA;AAAA;AAAiD;;AAEjD;;AAEe;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,sEAAa;AACnC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACpCA;AAAA;AAAA;AAAwD;;AAEzC,qCAAqC,8DAAiB;AACrE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAqD;;AAErD;AACA;AACA;;AAEA;AACA;AACA;;AAEe,uCAAuC,2DAAiB;AACvE;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAqD;;AAErD,+CAA+C,8BAA8B;AAC7E;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA,+CAA+C,KAAK,KAAK;AACzD,iFAAiF,KAAK,gBAAgB,YAAY;AAClH;AACA;AACA;AACA;AACA;;AAEe,qCAAqC,2DAAiB;AACrE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAqD;;AAErD;AACA;AACA;;AAEA;AACA;AACA;;AAEe,6BAA6B,2DAAiB;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,8BAA8B,2DAAiB;AAC9D;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,0BAA0B,2DAAiB;AAC1D;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;A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AEA;AACA,0BAA0B,gDAAS;AACnC;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,4BAA4B,gDAAS;AACrC;;AAEA;AACA,KAAK,E;AACL;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;AC5BA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9FA;AAAA;AAAO;AACP;AACA;;AAEA;AACA;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","const ENDPOINT = `https://api.openweathermap.org/data/2.5/`;\r\nconst TOKKEN = `d136e52c1f0eee76445085fa375a3f40`;\r\n\r\nconst DEFAULT_COORDS = {\r\n  latitude: 59.9344574,\r\n  longitude: 30.2441396\r\n}\r\n\r\nexport default class Api {\r\n  constructor() {\r\n    this._localStorage = window.localStorage;\r\n  }\r\n\r\n  _getCurrentCoords() {\r\n    return new Promise((resolve) => {\r\n      const geo = navigator.geolocation;\r\n\r\n      geo.getCurrentPosition((res) => {\r\n        resolve({\r\n          latitude: res.coords.latitude,\r\n          longitude: res.coords.longitude\r\n        });\r\n      }, () => {\r\n        resolve(DEFAULT_COORDS);\r\n      }, {\r\n        enableHighAccuracy: true,\r\n        timeout: 5000,\r\n        maximumAge: 0\r\n      });\r\n    });    \r\n  }\r\n\r\n  async getDataByGeo() {\r\n    const curCoords = await this._getCurrentCoords().then((res) => res);\r\n    \r\n    return fetch(`${ENDPOINT}weather?lat=${curCoords.latitude}&lon=${curCoords.longitude}&units=metric&appid=${TOKKEN}`)\r\n      .then((res) => {\r\n        return res.json();\r\n      });\r\n  }\r\n\r\n  _getIDsFromStorage() {\r\n    const cities = this._getCitiesFromStorage();\r\n\r\n    return cities.join(`,`);\r\n  }\r\n\r\n  _getCitiesFromStorage() {\r\n    return JSON.parse(this._localStorage.getItem(`favoriteCities`));\r\n  }\r\n\r\n  _setCitiesInStorage(arr) {\r\n    this._localStorage.setItem(`favoriteCities`, JSON.stringify(arr));\r\n  }\r\n\r\n  _addCityInStorage(id) {\r\n    const cities = this._getCitiesFromStorage();\r\n    cities.push(id)\r\n\r\n    this._setCitiesInStorage(cities);\r\n  }\r\n\r\n  removeCityFromStorage(id) {\r\n    const cities = this._getCitiesFromStorage();\r\n\r\n    this._setCitiesInStorage(cities.filter((city) => city !== id));\r\n  }\r\n\r\n  getDataByIDs() {\r\n    const ids = this._getIDsFromStorage();\r\n    \r\n    return fetch(`${ENDPOINT}group?id=${ids}&units=metric&appid=${TOKKEN}`)\r\n      .then((res) => {\r\n        return res.json();\r\n      });\r\n  }\r\n\r\n  getDataByName(cityName) {\r\n    let isOK = false; \r\n\r\n    return fetch(`${ENDPOINT}weather?q=${cityName.trim()}&units=metric&appid=${TOKKEN}`)\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          isOK = true;\r\n          \r\n          return res.json();\r\n        }\r\n\r\n        throw new Error(`Не удалось найти город \"${cityName}\". Попробуйте снова.`);\r\n      }).then((res) => {\r\n        if (isOK) {\r\n          this._addCityInStorage(res.id);\r\n        }        \r\n\r\n        return res;\r\n      });\r\n  }\r\n\r\n  isStorageEmpty() {\r\n    if (!this._getCitiesFromStorage()) {\r\n      this._setCitiesInStorage([]);\r\n\r\n      return true;\r\n    }\r\n\r\n    if (!this._getCitiesFromStorage().length) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n}","import {createElement} from '../utils/common.js';\n\nconst HIDDEN_CLASS = `visually-hidden`;\n\nexport default class AbstractComponent {\n  constructor() {\n    if (new.target === AbstractComponent) {\n      throw new Error(`Can't instantiate AbstractComponent, only concrete one.`);\n    }\n\n    this._element = null;\n  }\n\n  getTemplate() {\n    throw new Error(`Abstract method not implemented: getTemplate`);\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n\n  show() {\n    this._element.classList.remove(HIDDEN_CLASS);\n  }\n\n  hide() {\n    this._element.classList.add(HIDDEN_CLASS);\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n","import AbstractComponent from \"./abstract-component.js\";\n\nexport default class AbstractSmartComponent extends AbstractComponent {\n  recoveryListeners() {\n    throw new Error(`Abstract method not implemented: recoveryListeners`);\n  }\n\n  rerender() {\n    const oldElement = this.getElement();\n    const parent = oldElement.parentElement;\n\n    this.removeElement();\n\n    const newElement = this.getElement();\n\n    parent.replaceChild(newElement, oldElement);\n\n    this.recoveryListeners();\n  }\n}\n","import AbstractComponent from './abstract-component';\r\n\r\nconst createFavoriteWeatherContainerTemplate = () => {\r\n  return (\r\n    `<li class=\"favorites__item favorite-item\">\r\n      \r\n    </li>`\r\n  );\r\n}\r\n\r\nexport default class FavoriteWeatherContainer extends AbstractComponent {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getTemplate() {\r\n    return createFavoriteWeatherContainerTemplate();\r\n  }\r\n}","import AbstractComponent from './abstract-component';\r\n\r\nconst createFavoriteWeatherGeneralTemplate = ({name, icon, description, temp}) => {\r\n  return (\r\n    `<div class=\"favorite-item__general\">\r\n      <h3 class=\"favorite-item__city\">${name}</h3>\r\n      <p class=\"favorite-item__short-info\">\r\n        <span class=\"favorite-item__degrees\">${temp}&deg;C</span>\r\n        <img class=\"favorite-item__icon\" src=\"http://openweathermap.org/img/wn/${icon}@2x.png\" alt=\"${description}\" width=\"30\" height=\"30\">\r\n      </p>\r\n      <button class=\"favorite-item__button\"><span class=\"visually-hidden\">Удалить город</span></button>\r\n    </div>`\r\n  );\r\n}\r\n\r\nexport default class FavoriteWeatherGeneral extends AbstractComponent {\r\n  constructor(city) {\r\n    super();\r\n\r\n    this._city = city;\r\n  }\r\n\r\n  getTemplate() {\r\n    return createFavoriteWeatherGeneralTemplate(this._city);\r\n  }\r\n\r\n  setDeleteButtonClickHandler(cd) {\r\n    this._element.querySelector(`.favorite-item__button`).addEventListener(`click`, (evt) => {\r\n      evt.preventDefault();\r\n\r\n      cd();\r\n    });\r\n  }\r\n}","import AbstractComponent from './abstract-component';\r\n\r\nconst createFavoritesBoardTemplate = () => {\r\n  return (\r\n    `<ul class=\"favorites__list list-style-reset\">\r\n    \r\n    </ul>`\r\n  );\r\n}\r\n\r\nexport default class FavoritesBoard extends AbstractComponent {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getTemplate() {\r\n    return createFavoritesBoardTemplate();\r\n  }\r\n}","import AbstractComponent from './abstract-component';\r\n\r\nconst createFavoritesHeaderTemplate = () => {\r\n  return (\r\n    `<div class=\"favorites__header\">\r\n      <h2 class=\"favorites__heading\">Избранное</h2>\r\n      <form class=\"favorites__add\">\r\n        <input type=\"text\" class=\"favorites__input\" placeholder=\"Добавить новый город\">\r\n        <button class=\"favorites__add-button\" type=\"submit\"><span class=\"visually-hidden\">Добавить новый город</span></button>\r\n      </form>\r\n    </div>`\r\n  );\r\n}\r\n\r\nexport default class FavoritesHeader extends AbstractComponent {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getTemplate() {\r\n    return createFavoritesHeaderTemplate();\r\n  }\r\n\r\n  setAddHandler(cb) {\r\n    const inputElement = this._element.querySelector(`.favorites__input`);\r\n    const addButtonElement = this._element.querySelector(`.favorites__add-button`);\r\n\r\n    addButtonElement.addEventListener(`click`, (evt) => {\r\n      evt.preventDefault();\r\n\r\n      cb(inputElement.value);\r\n      inputElement.value = ``;\r\n    })\r\n  }\r\n\r\n  setDefaultMode() {\r\n    this._element.querySelector(`.favorites__add-button`).disabled = false;\r\n    this._element.querySelector(`.favorites__input`).disabled = false;\r\n  }\r\n\r\n  setLoadingMode() {\r\n    this._element.querySelector(`.favorites__add-button`).disabled = true;\r\n    this._element.querySelector(`.favorites__input`).disabled = true;\r\n  }\r\n}","import AbstractComponent from './abstract-component';\r\n\r\nconst createLocalHeaderTemplate = () => {\r\n  return (\r\n    `<div class=\"local__refresh refresh\">\r\n      <h2 class=\"refresh__heading\">Погода здесь</h2>\r\n      <button class=\"refresh__button refresh__button-text\" type=\"button\">Обновить геолокацию</button>\r\n    </div>`\r\n  );\r\n}\r\n\r\nexport default class LocalHeader extends AbstractComponent {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getTemplate() {\r\n    return createLocalHeaderTemplate();\r\n  }\r\n\r\n  setClickHandler(cb) {\r\n    this._element.querySelector(`.refresh__button`).addEventListener(`click`, () => {\r\n      cb();\r\n    });\r\n  }\r\n  \r\n  setDefaultMode() {\r\n    const button = this._element.querySelector(`.refresh__button`);\r\n    button.textContent = `Обновить геолокацию`;\r\n    button.disabled = false;\r\n    button.classList.remove(`refresh__button--loading`);\r\n    button.classList.remove(`refresh__button--error`);\r\n  }\r\n\r\n  setLoadingMode() {\r\n    const button = this._element.querySelector(`.refresh__button`);\r\n    button.textContent = `Обновление...`;\r\n    button.disabled = true;\r\n    button.classList.add(`refresh__button--loading`);\r\n    button.classList.remove(`refresh__button--error`);\r\n  }\r\n\r\n  setErrorMode() {\r\n    const button = this._element.querySelector(`.refresh__button`);\r\n    button.textContent = `Попробовать снова`;\r\n    button.disabled = false;\r\n    button.classList.add(`refresh__button--error`);\r\n    button.classList.remove(`refresh__button--loading`);\r\n  }\r\n}","import AbstractComponent from './abstract-component';\r\n\r\nconst createLocalWeatherContainerTemplate = () => {\r\n  return (\r\n    `<div class=\"local__info local-weather\">\r\n\r\n    </div>`\r\n  );\r\n}\r\n\r\nexport default class LocalWeatherContainer extends AbstractComponent {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getTemplate() {\r\n    return createLocalWeatherContainerTemplate();\r\n  }\r\n\r\n  shake() {\r\n    this._element.classList.add(`local-weather--error`);\r\n    setTimeout(() => {this._element.classList.remove(`local-weather--error`)}, 500);\r\n  }\r\n}","import AbstractSmartComponent from './abstract-smart-component';\r\n\r\nconst createLocalWeatherGeneralTemplate = ({name, icon, description, temp}) => {\r\n  return (\r\n    `<div class=\"local-weather__general\">\r\n      <h3 class=\"local-weather__city\">${name}</h3>\r\n      <p class=\"local-weather__short-info\">\r\n        <span class=\"local-weather__icon-wrap\">\r\n          <img class=\"local-weather__icon\" src=\"http://openweathermap.org/img/wn/${icon}@2x.png\" alt=\"${description}\" width=\"75\" height=\"75\">\r\n        </span>\r\n        <span class=\"local-weather__degrees\">${temp}&deg;C</span>\r\n      </p>\r\n    </div>`\r\n  );\r\n}\r\n\r\nexport default class LocalWeatherGeneral extends AbstractSmartComponent {\r\n  constructor(city) {\r\n    super();\r\n\r\n    this._city = city;\r\n  }\r\n\r\n  recoveryListeners() {\r\n  };\r\n\r\n  getTemplate() {\r\n    return createLocalWeatherGeneralTemplate(this._city);\r\n  }\r\n}","import AbstractSmartComponent from './abstract-smart-component';\r\n\r\nconst createWeatherDetailsTemplate = ({wind, clouds, pressure, humidity, coordinates}) => {\r\n  return (\r\n    `<ul class=\"local-weather__details weather-details list-style-reset\">\r\n      <li class=\"weather-details__item\">\r\n        <span class=\"weather-details__property\">Ветер</span>\r\n        <span class=\"weather-details__value\">${wind.speed} m/s, ${wind.direction}</span>\r\n      </li>\r\n\r\n      <li class=\"weather-details__item\">\r\n        <span class=\"weather-details__property\">Облачность</span>\r\n        <span class=\"weather-details__value\">${clouds} %</span>\r\n      </li>\r\n\r\n      <li class=\"weather-details__item\">\r\n        <span class=\"weather-details__property\">Давление</span>\r\n        <span class=\"weather-details__value\">${pressure} hpa</span>\r\n      </li>\r\n\r\n      <li class=\"weather-details__item\">\r\n        <span class=\"weather-details__property\">Влажность</span>\r\n        <span class=\"weather-details__value\">${humidity} %</span>\r\n      </li>\r\n\r\n      <li class=\"weather-details__item\">\r\n        <span class=\"weather-details__property\">Координаты</span>\r\n        <span class=\"weather-details__value\">[${coordinates.latitude}, ${coordinates.longitude}]</span>\r\n      </li>\r\n    </ul>`\r\n  );\r\n}\r\n\r\nexport default class WeatherDetails extends AbstractSmartComponent {\r\n  constructor(city) {\r\n    super();\r\n\r\n    this._city = city;\r\n  }\r\n\r\n  recoveryListeners() {\r\n  };\r\n\r\n  getTemplate() {\r\n    return createWeatherDetailsTemplate(this._city);\r\n  }\r\n}","import { remove, render } from '../utils/render';\r\n\r\nimport FavoriteWeatherContainerComponent from '../components/favorite-weather-container';\r\nimport FavoriteWeatherGeneralComponent from '../components/favorite-weather-general';\r\nimport WeatherDetailsComponent from '../components/weather-details';\r\n\r\nexport default class FavoriteWeather {\r\n  constructor(container, cityModel, deleteHandler) {\r\n    this._container = container;\r\n    this._cityModel = cityModel;\r\n    this._deleteHandler = deleteHandler;\r\n\r\n    this._favoriteWeatherContainerComponent = new FavoriteWeatherContainerComponent();\r\n    this._favoriteWeatherGeneralComponent = new FavoriteWeatherGeneralComponent(this._cityModel);\r\n    this._weatherDetailsComponent =  new WeatherDetailsComponent(this._cityModel);\r\n\r\n    this.deleteButtonClickHandler = this.deleteButtonClickHandler.bind(this);\r\n  }\r\n\r\n  render() {\r\n    render(this._favoriteWeatherContainerComponent.getElement(), this._favoriteWeatherGeneralComponent);\r\n\r\n    render(this._favoriteWeatherContainerComponent.getElement(), this._weatherDetailsComponent);\r\n    this._favoriteWeatherGeneralComponent.setDeleteButtonClickHandler(this.deleteButtonClickHandler);\r\n\r\n    render(this._container, this._favoriteWeatherContainerComponent);\r\n  }\r\n\r\n  deleteButtonClickHandler() {\r\n    this._removeCity();\r\n    this._deleteHandler(this._cityModel.id);\r\n  }\r\n\r\n  _removeCity() {\r\n    remove(this._favoriteWeatherContainerComponent);\r\n    remove(this._favoriteWeatherGeneralComponent);\r\n    remove(this._weatherDetailsComponent);\r\n  }\r\n}","import { createElement } from '../utils/common';\r\nimport { render } from '../utils/render';\r\n\r\nimport CitiesModel from '../models/cities';\r\n\r\nimport FavoriteWeatherController from '../controllers/favorite-weather';\r\n\r\nimport FavoritesHeaderComponent from '../components/favorites-header';\r\nimport FavoritesBoardComponent from '../components/favorites-board';\r\n\r\nexport default class FavoritesBoard {\r\n  constructor(container, api) {\r\n    this._container = container;\r\n    this._api = api;\r\n    \r\n    this._citiesModel = new CitiesModel();\r\n\r\n    this._favoritesHeaderComponent = new FavoritesHeaderComponent();\r\n    this._favoritesBoardComponent = new FavoritesBoardComponent();\r\n\r\n    this.deleteCityHandler = this.deleteCityHandler.bind(this);\r\n    this.addHandler = this.addHandler.bind(this);\r\n  }\r\n\r\n  render() {\r\n    const container = this._container;\r\n\r\n    render(container, this._favoritesHeaderComponent);\r\n    this._favoritesHeaderComponent.setAddHandler(this.addHandler);\r\n\r\n    render(container, this._favoritesBoardComponent);\r\n\r\n    this._renderBoard();\r\n  }\r\n\r\n  addHandler(cityName) {\r\n    this._favoritesHeaderComponent.setLoadingMode();\r\n\r\n    if (this._favoritesBoardComponent.getElement().lastChild.tagName === `B`) {\r\n      this._favoritesBoardComponent.getElement().lastChild.remove();\r\n    }\r\n\r\n    this._favoritesBoardComponent.getElement().appendChild(createElement(`<b>Загрузка...</b>`));\r\n\r\n    this._api.getDataByName(cityName)\r\n      .then((data) => {\r\n        this._favoritesBoardComponent.getElement().lastChild.remove();\r\n\r\n        const cityCard = new FavoriteWeatherController(this._favoritesBoardComponent.getElement(), this._citiesModel.addCity(data), this.deleteCityHandler);\r\n        cityCard.render();\r\n        \r\n        this._favoritesHeaderComponent.setDefaultMode();\r\n      }).catch((err) => {\r\n        console.error(err);\r\n        \r\n        this._favoritesBoardComponent.getElement().lastChild.remove();\r\n        this._favoritesBoardComponent.getElement().appendChild(createElement(`<b>${err.message}</b>`));\r\n\r\n        this._favoritesHeaderComponent.setDefaultMode();\r\n      })      \r\n  }\r\n\r\n  _renderBoard() {\r\n    if (this._api.isStorageEmpty()) {\r\n      this._favoritesBoardComponent.getElement().innerHTML = `<b>Список пока пуст :(</b>`;\r\n\r\n      return;\r\n    } \r\n\r\n    this._favoritesBoardComponent.getElement().innerHTML = `<b>Загрузка...</b>`;\r\n    this._api.getDataByIDs()\r\n      .then((res) => {\r\n        this._favoritesBoardComponent.getElement().innerHTML = ``;\r\n        this._citiesModel.setCities(res);\r\n        \r\n        this._renderCities(this._favoritesBoardComponent.getElement());\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n        this._favoritesBoardComponent.getElement().innerHTML = `<b>Ошибка загрузки</b>`;\r\n      });\r\n  }\r\n\r\n  _renderCities() {\r\n    this._citiesModel.getCities().forEach((cityModel) => {\r\n      const cityCard = new FavoriteWeatherController(this._favoritesBoardComponent.getElement(), cityModel, this.deleteCityHandler);\r\n      cityCard.render();\r\n    })\r\n  }\r\n\r\n  deleteCityHandler(id) {\r\n    this._api.removeCityFromStorage(id);\r\n\r\n    if (this._api.isStorageEmpty()) {\r\n      this._favoritesBoardComponent.getElement().innerHTML = `<b>Список пока пуст :(</b>`;\r\n    } \r\n  }\r\n}","import { render } from \"../utils/render\";\r\n\r\nimport LocalHeaderComponent from \"../components/local-header\";\r\nimport LocalWeatherContainerComponent from '../components/local-weather-container';\r\nimport LocalWeatherGeneralComponent from '../components/local-weather-general';\r\nimport WeatherDetailsComponent from '../components/weather-details';\r\n\r\nimport CityModel from '../models/city';\r\n\r\nexport default class LocalWeather {\r\n  constructor(container, api) {\r\n    this._container = container;\r\n    this._cityModel = new CityModel();\r\n    this._api = api;\r\n\r\n    this._localHeaderComponent = new LocalHeaderComponent();\r\n    this._localWeatherContainerComponent = new LocalWeatherContainerComponent();\r\n    this._localWeatherGeneralComponent = new LocalWeatherGeneralComponent(this._cityModel);\r\n    this._weatherDetailsComponent =  new WeatherDetailsComponent(this._cityModel);\r\n\r\n    this.buttonClickHandler = this.buttonClickHandler.bind(this);\r\n  }\r\n\r\n  render() {\r\n    render(this._container, this._localHeaderComponent);\r\n    this._localHeaderComponent.setClickHandler(this.buttonClickHandler);\r\n\r\n    this._api.getDataByGeo()\r\n      .then((data) => {\r\n        this._cityModel.setData(data);\r\n        \r\n        render(this._localWeatherContainerComponent.getElement(), this._localWeatherGeneralComponent);\r\n        render(this._localWeatherContainerComponent.getElement(), this._weatherDetailsComponent);\r\n      });\r\n\r\n    render(this._container, this._localWeatherContainerComponent);\r\n  }\r\n\r\n  buttonClickHandler() {\r\n    this._localHeaderComponent.setLoadingMode();  \r\n\r\n    this._api.getDataByGeo()\r\n      .then((data) => {\r\n        this._cityModel.setData(data);\r\n        \r\n        this._localWeatherGeneralComponent.rerender();\r\n        this._weatherDetailsComponent.rerender();\r\n\r\n        this._localHeaderComponent.setDefaultMode();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        \r\n        this._localHeaderComponent.setErrorMode();\r\n        this._localWeatherContainerComponent.shake();\r\n      });    \r\n  }\r\n}","import LocalWeatherController from './controllers/local-weather';\nimport FavoritesBoardController from './controllers/favorites-board';\nimport API from './api';\n\nconst localWeatherContainerElement = document.querySelector(`.local`);\nconst favoritesContainerElement = document.querySelector(`.favorites`);\n\nconst api = new API();\n\nconst localWeatherController = new LocalWeatherController(localWeatherContainerElement, api);\nconst favoritesBoardController = new FavoritesBoardController(favoritesContainerElement, api);\n\nlocalWeatherController.render();\nfavoritesBoardController.render();\n","import CityModel from './city.js'\r\n\r\nexport default class CitiesModel {\r\n  constructor() {\r\n    this._cities = [];\r\n  }\r\n\r\n  addCity(data) {\r\n    const cityModel = new CityModel();\r\n    cityModel.setData(data);\r\n\r\n    this._cities.push(cityModel);\r\n\r\n    return cityModel;\r\n  }\r\n\r\n  setCities(data) {\r\n    this._cities = data.list.map((city) => {\r\n      const cityModel = new CityModel();\r\n      cityModel.setData(city);\r\n\r\n      return cityModel;\r\n    });  \r\n  }\r\n\r\n  getCities() {\r\n    return this._cities;\r\n  }\r\n}","const getDirection = (deg) => {\r\n  let direction;\r\n\r\n  switch(true) {\r\n    case deg > 11.25 && deg < 33.75:\r\n      direction = `North-northeast`;\r\n      break;\r\n\r\n    case deg > 33.75 && deg < 56.25:\r\n      direction = `Northeast`;\r\n      break;\r\n      \r\n    case deg > 56.25 && deg < 78.75:\r\n    direction = `East-northeast`;\r\n    break;\r\n    \r\n    case deg > 78.75 && deg < 101.25:\r\n      direction = `East`;\r\n      break;\r\n    \r\n    case deg > 101.25 && deg < 123.75:\r\n      direction = `East-southeast`;\r\n      break;\r\n    \r\n    case deg > 123.75 && deg < 146.25:\r\n      direction = `Southeast`;\r\n      break;\r\n    \r\n    case deg > 146.25 && deg < 168.75:\r\n      direction = `South-southeast`;\r\n      break;\r\n    \r\n    case deg > 168.75 && deg < 191.25:\r\n      direction = `South`;\r\n      break;\r\n    \r\n    case deg > 191.25 && deg < 213.75:\r\n      direction = `South-southwest`;\r\n      break;\r\n    \r\n    case deg > 213.75 && deg < 236.25:\r\n      direction = `Southwest`;\r\n      break;\r\n    \r\n    case deg > 236.25 && deg < 258.75:\r\n      direction = `West-southwest`;\r\n      break;\r\n    \r\n    case deg > 258.75 && deg < 281.25:\r\n      direction = `West`;\r\n      break;\r\n    \r\n    case deg > 281.25 && deg < 303.75:\r\n      direction = `West-northwest`;\r\n      break;\r\n    \r\n    case deg > 303.75 && deg < 326.25:\r\n      direction = `Northwest`;\r\n      break;\r\n    \r\n    case deg > 326.25 && deg < 348.75:\r\n      direction = `North-northwest`;\r\n      break;\r\n  \r\n    default:\r\n      direction = `North`;\r\n  }\r\n\r\n  return direction;\r\n};\r\n\r\nexport default class City {\r\n  constructor() {\r\n    this.setData = this.setData.bind(this);\r\n  }\r\n\r\n  setData(data) {\r\n    this.id = data[`id`];\r\n    this.name = data[`name`];\r\n    this.description = data[`weather`][0][`description`];\r\n    this.icon = data[`weather`][0][`icon`];\r\n    this.temp = Math.round(data[`main`][`temp`]);\r\n    this.wind = {\r\n      speed: data[`wind`][`speed`],\r\n      direction: getDirection(data[`wind`][`deg`])\r\n    };\r\n    this.clouds = data[`clouds`][`all`];\r\n    this.pressure = data[`main`][`pressure`];\r\n    this.humidity = data[`main`][`humidity`];\r\n    this.coordinates = {\r\n      latitude: data[`coord`][`lat`],\r\n      longitude: data[`coord`][`lon`]\r\n    };\r\n  }\r\n}\r\n","export const createElement = (template) => {\n  const newElement = document.createElement(`div`);\n  newElement.innerHTML = template;\n\n  return newElement.firstChild;\n};\n","export const render = (container, component, position = `beforeend`) => {\n  switch (position) {\n    case `afterend`:\n      container.after(component.getElement());\n      break;\n\n    case `beforeend`:\n      container.append(component.getElement());\n      break;\n\n    case `afterbegin`:\n      container.prepend(component.getElement());\n      break;\n\n    default:\n      throw new Error(`Only 'afterend', 'beforeend' or 'afterbegin'.`);\n  }\n};\n\nexport const remove = (component) => {\n  component.getElement().remove();\n  component.removeElement();\n};\n\nexport const replace = (newComponent, oldComponent) => {\n  const newElement = newComponent.getElement();\n  const oldElement = oldComponent.getElement();\n  const parentElement = oldElement.parentElement;\n\n  const isExistElements = !!(newElement && oldElement && parentElement);\n\n  if (isExistElements) {\n    parentElement.replaceChild(newElement, oldElement);\n  }\n};\n"],"sourceRoot":""}